YUI.add("user-account-card-view",function(e,t){var i=require("hermes-core/flog")(t);new e.SubscriptionsHelper;e.namespace("Views")[this.name]=e.Base.create(this.name,e.FlickrView,[],{langBundles:this.details.langBundles,initializer:function(e){this.params=e},loadState:function(){var t=this,o=[],r=this.appContext.getViewer().nsid;return o.push(this.appContext.getModel("person-models",r).then(function(e){if(t.userModel=e,e.getValue("isPro"))return t.appContext.getModel("effective-subscriptions-models",e.id).then(function(e){t.effectiveSubscriptions=e}).catch(function(e){i.error(e),t.effectiveSubscriptions=!1})})),o.push(this.appContext.getModel("person-profile-models",r).then(function(e){t.profileModel=e})),e.Promise.all(o)},buildContainer:function(){var t,i=this.profileModel.getValue("photoCount"),o=e.config.flickr.account.photo_limit,r=this.profileModel.getValue("unreadMessages");this.userModel.getValue("isPro")&&this.effectiveSubscriptions&&(t=this.effectiveSubscriptions.getValue("closed").length>0&&0===this.effectiveSubscriptions.getValue("pending").length);var n={user:{isPro:this.userModel.getValue("isPro"),proBadge:this.userModel.getValue("proBadge"),csrf:this.appContext.auth.csrf?this.appContext.auth.csrf:""},itemCount:i,itemLimit:o,limitReached:e.UserLimitsHelper.hasReachedUploadLimit(this.profileModel,this.appContext),isUnder500:i<=500,isClosedPro:t,unreadCount:r,hasUnreadMessages:r>0,attrs:{user:{username:this.userModel.getValue("username")}},greeting:e.Greetings.getRandomGreeting({username:this.userModel.getValue("username"),url:this.userModel.getValue("url")}),showOverLimitWarning:this.appContext.getCookie(e.config.flickr.upload_blocking.dismiss_over_upload_limit_message_cookie_name)&&e.UserLimitsHelper.isOverARRLimit(this.profileModel,this.appContext)},s=Object.assign(n,this.params);this.setContainerWithTemplate("user-account-card",s)},activate:function(){var e=this.get("container");this.graphContainer=e.one(".storage-section .graph"),this.learnMoreButton=e.one(".storage-section .over-limit-learn-button"),this.graphContainer&&this.drawStorageGraph(),this.learnMoreButton&&this.registerEventHandler(this.learnMoreButton.on("click",this.handleLearnMoreClick.bind(this)))},drawStorageGraph:function(){var t,i,o=e.config.flickr.account.photo_limit;i=(t=this.profileModel.getValue("photoCount")/o||0)>.1?[{durationProportion:.2,fillProportion:.001},{durationProportion:1,fillProportion:t,easeFunction:"easeInOutQuad"}]:[{durationProportion:.2,fillProportion:.001},{durationProportion:.65,fillProportion:.7,easeFunction:"easeOutQuad"},{durationProportion:1,fillProportion:t,easeFunction:"easeInOutQuad"}];new e.CircleFillGraph({containerElement:this.graphContainer.getDOMNode(),lineWidth:2,backgroundStrokeColor:"#e1e1e1",gradient:[{fillProportion:0,value:"5BF4FC"},{fillProportion:.3,value:"33b7ff"},{fillProportion:.7,value:"FF0084"},{fillProportion:1,value:"FF0084"}],duration:1.4,stops:i,segments:120}).start()},handleLearnMoreClick:function(t){e.fire("accountCard:overLimitLearnMoreClick"),e.fire("accountCard:close")}})},"@VERSION@",{requires:["hermes-template-user-account-card","circle-fill-graph","intl-number","handlebars-helpers","greetings-helper","subscriptions-helper","user-limits-helper"],langBundles:["common","account-menu","notifications","stats"]});YUI.add("hermes-lang-account-menu_ko-kr",function(I,N){I.Intl.add("hermes/account-menu","ko-KR",{SPACE_USED:["${total}"," 중에서 ","${percentage}","% 사용 중"],SPACE_USED_STYLEGUIDE:["${total}"," 중 ","${percentage}","% 사용"],SPACE_USED_UNLIMITED:["무제한 저장 공간 ","${used}"," 사용 중"],PHOTO_COUNT_MANY:[{type:"number",valueName:"num"},"장의 사진"],PHOTO_COUNT_ONE:["1장의 사진"],PHOTO_COUNT_NONE:["사진 없음"],PHOTO_COUNT_1K:[{type:"number",valueName:"num"},"천장의 사진"],ADDMORESPACE:["공간 추가"],GOADFREE:["광고 없이 사용해 보세요."],GOPRO:["프로 버전 실행"],GETPRO:["Pro 구매"],RESUBSCRIBE_TO_PRO:["Pro 다시 가입"],GREETING_CAPTION_SPANISH:["이제 스페인로 환영 인사가 무엇인지 아시겠죠"],GREETING_CAPTION_GERMAN:["이제 독일어로 환영 인사가 무엇인지 아시겠죠"],GREETING_CAPTION_AUSTRALIAN:["이제 호주 영어로 환영 인사가 무엇인지 아시겠죠"],GREETING_CAPTION_DUTCH:["이제 네덜란드어로 환영 인사가 무엇인지 아시겠죠"],GREETING_CAPTION_ENGLISH:["이제 영어로 환영 인사가 무엇인지 아시겠죠"],GREETING_CAPTION_ARABIC:["이제 아라비아어로 환영 인사가 무엇인지 아시겠죠"],GREETING_CAPTION_FRENCH:["이제 불어로 환영 인사가 무엇인지 아시겠죠"],GREETING_CAPTION_ITALIAN:["이제 이탈리아어로 환영 인사가 무엇인지 아시겠죠"],GREETING_CAPTION_SWEDISH:["이제 스웨덴어로 환영 인사가 무엇인지 아시겠죠"],GREETING_CAPTION_HAWAIIAN:["이제 하와이어로 환영 인사가 무엇인지 아시겠죠"],GREETING_CAPTION_TAGALOG:["이제 타갈로그어로 환영 인사가 무엇인지 아시겠죠"],GREETING_CAPTION_HEBREW:["이제 히브리어로 환영 인사가 무엇인지 아시겠죠"],GREETING_CAPTION_HINDI:["이제 힌디어로 환영 인사가 무엇인지 아시겠죠"],GREETING_CAPTION_MANDARIN:["이제 중국어로 환영 인사가 무엇인지 아시겠죠"],GREETING_CAPTION_PORTUGUESE:["이제 포르투갈어로 환영 인사가 무엇인지 아시겠죠"],GREETING_CAPTION_ALBANIAN:["이제 알바니어로 환영 인사가 무엇인지 아시겠죠"],GREETING_CAPTION_ESTONIAN:["이제 에스토니아어로 환영 인사가 무엇인지 아시겠죠"],GREETING_CAPTION_GREEK:["이제 그리스어로 환영 인사가 무엇인지 아시겠죠"],GREETING_CAPTION_HUNGARIAN:["이제 헝가리아어로 환영 인사가 무엇인지 아시겠죠"],GREETING_CAPTION_LINGALA:["이제 링갈라어로 환영 인사가 무엇인지 아시겠죠"],GREETING_CAPTION_SWAHILI:["이제 스와힐리어로 환영 인사가 무엇인지 아시겠죠"],GREETING_CAPTION_TSHILUBA:["이제 칠루바어로 환영 인사가 무엇인지 아시겠죠"],GREETING_CAPTION_TURKISH:["이제 터키어로 환영 인사가 무엇인지 아시겠죠"],GREETING_CAPTION_BURMESE:["이제 버마어로 환영 인사가 무엇인지 아시겠죠"],GREETING_CAPTION_ICELANDIC:["이제 아이슬란드어로 환영 인사가 무엇인지 아시겠죠"],GREETING_CAPTION_ZULU:["이제 줄루어로 환영 인사가 무엇인지 아시겠죠"],GREETING_CAPTION_KOREAN:["이제 한국어로 환영 인사가 무엇인지 아시겠죠"],GREETING_CAPTION_IRISH:["이제 아일랜드어로 환영 인사가 무엇인지 아시겠죠"],GREETING_CAPTION_LATVIAN:["이제 라트비아어로 환영 인사가 무엇인지 아시겠죠"],GREETING_CAPTION_BASQUE:["이제 바스크어로 환영 인사가 무엇인지 아시겠죠"],GREETING_CAPTION_BENGALI:["이제 벵골어로 환영 인사가 무엇인지 아시겠죠"],GREETING_CAPTION_BULGARIAN:["이제 불가리아어로 환영 인사가 무엇인지 아시겠죠"],GREETING_CAPTION_CROATIAN:["이제 크로아티아어로 환영 인사가 무엇인지 아시겠죠"],GREETING_CAPTION_CZECH:["이제 체코어로 환영 인사가 무엇인지 아시겠죠"],GREETING_CAPTION_DANISH:["이제 덴마크어로 환영 인사가 무엇인지 아시겠죠"],GREETING_CAPTION_FINNISH:["이제 핀란드어로 환영 인사가 무엇인지 아시겠죠"],GREETING_CAPTION_HOPI:["이제 호피어로 환영 인사가 무엇인지 아시겠죠"],GREETING_CAPTION_INDONESIAN:["이제 인도네시아어로 환영 인사가 무엇인지 아시겠죠"],GREETING_CAPTION_KANNADA:["이제 칸나다어로 환영 인사가 무엇인지 아시겠죠"],GREETING_CAPTION_KURDISH:["이제 쿠르드어로 환영 인사가 무엇인지 아시겠죠"],GREETING_CAPTION_LITHUANIAN:["이제 리투아니아어로 환영 인사가 무엇인지 아시겠죠"],GREETING_CAPTION_MALAYSIAN:["이제 말레이시아어로 환영 인사가 무엇인지 아시겠죠"],GREETING_CAPTION_NORWEGIAN:["이제 노르웨이어로 환영 인사가 무엇인지 아시겠죠"],GREETING_CAPTION_POLISH:["이제 폴란드어로 환영 인사가 무엇인지 아시겠죠"],GREETING_CAPTION_ROMANIAN:["이제 루마니아어로 환영 인사가 무엇인지 아시겠죠"],GREETING_CAPTION_RUSSIAN:["이제 러시아어로 환영 인사가 무엇인지 아시겠죠"],GREETING_CAPTION_SERBIAN:["이제 세르비아어로 환영 인사가 무엇인지 아시겠죠"],GREETING_CAPTION_SLOVAKIAN:["이제 슬로바키아어로 환영 인사가 무엇인지 아시겠죠"],GREETING_CAPTION_UKRAINIAN:["이제 우크라니아어로 환영 인사가 무엇인지 아시겠죠"],GREETING_CAPTION_VIETNAMESE:["이제 베트남어로 환영 인사가 무엇인지 아시겠죠"],ITEM_COUNT_OF_LIMIT:["${count}"," / ","${limit}"," 항목"],GET_UNLIMITED_UPLOADS:["무제한 업로드 받기"],UPLOAD_YOUR_PHOTOS:["사진 업로드"],ITEM_LIMIT_REACHED:["${limit}"," 항목 제한에 도달했습니다!"],ITEM_LIMIT_EXCEEDED:["${limit}","개 항목 제한이 초과되었습니다!"]})},"@VERSION@",{requires:["intl"]});YUI.add("account-menu-view",function(e,t){"use strict";require("hermes-core/flog")(t);e.namespace("Views")[this.name]=e.Base.create("account-menu-view",e.FlickrView,[],{langBundles:this.details.langBundles,initializer:function(e){return this},loadState:function(){var t=this,o=[],n=this.appContext.getViewer();return n.signedIn?(t.set("user",{signedIn:!0,csrf:this.appContext.auth.csrf?this.appContext.auth.csrf:""}),o.push(this.appContext.getModel("person-models",n.nsid).then(function(o){var n=o.toJSON();Object.keys(n.buddyicon||{}).forEach(function(e){n.buddyicon[e]||(n.buddyicon[e]=n.buddyicon.default)}),t.set("user",e.merge(t.get("user"),n))})),o.push(t.appContext.getModel("person-profile-models",n.nsid).then(function(o){var n=o.toJSON();n.unreadMessages=parseInt(n.unreadMessages,10),n.storageUsed=parseInt(n.storageUsed,10),n.storageTotal=parseInt(n.storageTotal,10),t.set("profileModel",o),t.set("user",e.merge(t.get("user"),n))})),e.Promise.all(o).then(function(){t.set("showOverLimitWarning",t.appContext.getCookie(e.config.flickr.upload_blocking.dismiss_over_upload_limit_message_cookie_name)&&e.UserLimitsHelper.isOverARRLimit(t.get("profileModel"),t.appContext))})):(t.set("user",{signedIn:!1}),e.Promise.resolve())},buildContainer:function(){return this.setContainerWithTemplate("account-menu",this.toJSON()),this},toJSON:function(){var t=e.merge(this.get("user")),o=this.appContext.lang;return parseInt(t.photoCount,10)>1?t.pluralPhotos=!0:t.pluralPhotos=!1,parseInt(t.photoCount,10)<1&&(t.photoCount=!1),t.photoCount>1e3&&(t.photoCount=Math.round(t.photoCount/1e3),t.oneK=!0),t.isPro?t.storageTotalFormatted=t.storageTotal<0?"":e.Handlebars.helpers.friendlyDataSize(t.storageTotal):t.hasUnlimitedStorage?t.storageTotalFormatted="":t.has1TB?t.storageTotalFormatted="1TB":t.has2TB?t.storageTotalFormatted="2TB":t.storageTotalFormatted=t.storageTotal<0?"":e.Handlebars.helpers.friendlyDataSize(t.storageTotal),"vi-vn"===o.toLowerCase()&&(o="vn-VN"),t.storageUsedPercentage=Math.floor(1e3*t.storageUsed/t.storageTotal)/10||"0.0",t.storageUsedFormatted=e.Handlebars.helpers.friendlyDataSize(t.storageUsed),t.barWidth=Math.floor(t.storageUsedPercentage/100*293),t.unreadMessages=t.unreadMessages>9999?"9999+":t.unreadMessages,{user:t,helpLocaleKey:o.replace("-","_")||"en_US",flippers:this.appContext.flipper.toJSON(),showOverLimitWarning:this.get("showOverLimitWarning")}},activate:function(){e.on("notifications:openAccountMenuClicked",function(e){this.openUserAccountCard(!0)}.bind(this)),setTimeout(function(){this.get("container").on(["click","keydown"],function(e){"click"!==e.type&&13!==e.keyCode&&32!==e.keyCode||(e.preventDefault(),e.stopPropagation(),this.openUserAccountCard())},this)}.bind(this),350)},openUserAccountCard:function(t){var o=this,n=this.get("container"),a=new e.Views["user-account-card-view"]({appContext:this.appContext,showHighlight:t});this.accountMenu=new e.Views.FluidDroparound({appContext:this.appContext,dismissOnOverlayClick:!0,showDropArrow:!0,preferTop:!0,width:300,height:"auto",autoSizeToContent:!0,anchorOffsetVertical:-6,anchorOffsetHorizontal:5,anchorElement:n.one(".c-account-menu"),keyboardAnchorElement:n.one("a[aria-haspopup=true]"),subview:a,contentPadding:0,preventPageScrollOnScroll:!0,useDefaultKeyboardNavigation:!1,classList:"user-account-card-droparound",positionFixed:!0}),this.accountMenu.show(),e.on("accountCard:close",function(){o.accountMenu.close()})},closeMenu:function(e){e&&e.preventDefault(),this.accountMenuDialog&&this.accountMenuDialog.close()},destructor:function(){this.accountMenuDialog&&(this.accountMenuDialog.destroy(),this.accountMenuDialog=null)}})},"@VERSION@",{requires:["flickr-view","hermes-template-account-menu","hermes-template-account-menu-dialog-styleguide","hermes-template-account-menu-card","fluid-droparound-view","user-account-card-view"],optional:["person-models","person-profile-models"],langBundles:["account-menu","common","autosuggest"]});